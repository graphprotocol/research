# Contract source: https://github.com/OriginProtocol/demo-dapp/blob/master/contracts/Listing.sol
# specVersion indicates the version of the ingest mapping spec
specVersion: 0.0.1
# definitions are optional to help readability. May be used to specify aliases
# for use later in the file. YAML requires that aliases be declared before they
# are referenced.
definitions:
# Links to the GraphQL schema being mapped to
# i.e.
# type User {
#   id: ID
#   firstName: String
#   lastName: String
# }
schema:
  /: /ipfs/QmUmg7BZC1YP1ca66rRtWKxpXp77WgVHrnv263JtDuvs2k
datasets:
  - data: ipfs/QmUmg7BZC1YP1ca66rRtWKxpXp77WgVHrnv263JtDuvs2k
    structure:
      format: text/csv
      # https://frictionlessdata.io/specs/tabular-data-package/
      schema:
        fields:
          - name: id
            type: integer
          - name: first_name
            type: string
          - name: last_name
            type: string
          - name: age
            type: integer
      charEncoding: utf-8
    mapping:
        # Strategy specifies how we will access/decode/parse the storage. This
        # would be the extension point for implementing new "strategies" for
        # parsing storage with custom logic. In the future, there might be a
        # "Javascript" strategy where the user interacts with the contract through
        # a web3 API
      - strategy: state-mapping
        # Defines transofrmations on the input data to fit the final schema
        transformState:
          mapKeys:
            - from: first_name
              to: firstName
            - from: last_name
              to: lastName
          pluck:
            - id
            - firstName
            - lastName
